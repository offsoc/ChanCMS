import{r as U,s as $,g as j,q as A,I as H,v as J,x as K,a as z}from"./element-plus.js";import{I as G,H as O,F as P}from"./@element-plus.js";import{t as V,a as C}from"./index.js";import{l as Q,D as W,r as X}from"./dialog3.js";import{V as x,w as Y,n as E,r as _,aq as Z,c as n,o as a,a as v,U as o,K as i,u as w,a2 as g,R as f,J as D}from"./@vue.js";import"./dayjs.js";import"./ace-builds.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./vue-router.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";import"./@fingerprintjs.js";import"./tslib.js";/* empty css     */const ee={class:"bg-fff radius-6 pd-20 mb-10"},te={class:"bg-fff radius-6 pd-20"},oe={class:"flex justify-end"},le={key:0},ie={key:1},ae={key:2},se={key:3},re={key:0},ne={key:1},Ne={__name:"index",setup(de){const s=x({dialogVisible:!1,id:0,params:{},list:[]});Y(()=>s.dialogVisible,t=>{t||u()}),E(()=>{u()});const u=async()=>{try{const t=await Q();if(t.code===200){t.data.list.forEach(d=>{d.id=Number(d.id)});const e=V(t.data.list);m.value=C(e),b.value=!1}}catch(t){console.log(t)}},B=t=>{s.id=parseInt(t.id),s.dialogVisible=!0},I=()=>{s.id=0,s.dialogVisible=!0},T=async t=>{console.log(t);try{(await X({id:t.id})).code===200&&(z({message:"删除成功",type:"success"}),u())}catch(e){console.log(e)}},c=x({keywords:""}),b=_(!0),m=_([]),F=_(null),N=_([]),q=()=>{c.keywords="",m.value=[],N.value=[],y()},y=async()=>{try{const t=c.keywords,e=await fetch(t);if(e.code===200){const d=V(e.data);m.value=C(d),b.value=!1}}catch(t){console.log(t)}};return E(()=>{y()}),(t,e)=>{const d=$,k=U,p=j,L=A,r=J,M=K,h=Z("permission-disabled"),R=H;return a(),n("div",null,[v("div",ee,[o(L,{inline:!0,model:c},{default:i(()=>[o(k,{label:"名称",prop:"keywords"},{default:i(()=>[o(d,{placeholder:"请输入栏目名称","suffix-icon":w(G),modelValue:c.keywords,"onUpdate:modelValue":e[0]||(e[0]=l=>c.keywords=l),clearable:""},null,8,["suffix-icon","modelValue"])]),_:1}),o(k,null,{default:i(()=>[o(p,{type:"primary",onClick:y,round:""},{default:i(()=>[...e[2]||(e[2]=[g("搜索",-1)])]),_:1}),o(p,{onClick:q,round:""},{default:i(()=>[...e[3]||(e[3]=[g("清空",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),v("div",te,[v("div",oe,[f((a(),D(p,{type:"primary",onClick:I,round:""},{default:i(()=>[...e[4]||(e[4]=[g("新增",-1)])]),_:1})),[[h,["editor","admin","super"]]])]),f((a(),D(M,{ref_key:"multipleTableRef",ref:F,data:m.value,"tooltip-effect":"dark","row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}},{default:i(()=>[o(r,{prop:"title",label:"菜单管理",width:"180"}),o(r,{prop:"path",align:"center",label:"路由"}),o(r,{prop:"type",align:"center",width:"100",label:"节点类型"},{default:i(l=>[l.row.type=="M"?(a(),n("p",le,"目录")):l.row.type=="C"?(a(),n("p",ie,"菜单")):l.row.type=="F"?(a(),n("p",ae,"按钮")):(a(),n("p",se,"接口"))]),_:1}),o(r,{prop:"perms",align:"center",label:"权限标识"}),o(r,{prop:"order_num",align:"center",width:"60",label:"排序"}),o(r,{prop:"is_show",width:"60",label:"状态"},{default:i(l=>[l.row.is_show=="1"?(a(),n("p",re,"显示")):(a(),n("p",ne,"隐藏"))]),_:1}),o(r,{fixed:"right",label:"操作",width:"160"},{default:i(l=>[f(o(p,{icon:w(O),circle:"",onClick:S=>B(l.row)},null,8,["icon","onClick"]),[[h,["editor","admin","super"]]]),f(o(p,{icon:w(P),circle:"",onClick:S=>T(l.row)},null,8,["icon","onClick"]),[[h,["editor","admin","super"]]])]),_:1})]),_:1},8,["data"])),[[R,b.value]])]),o(W,{visible:s.dialogVisible,"onUpdate:visible":e[1]||(e[1]=l=>s.dialogVisible=l),id:s.id,onSuccess:u},null,8,["visible","id"])])}}};export{Ne as default};
