import{g as $,u as q,v as A,w as j,b as z,x as F,y as G,A as H,a as v}from"./element-plus.js";import{u as I}from"./vue-router.js";import{v as J,H as K,F as L,B as O}from"./@element-plus.js";import{l as P,D as Q,r as W}from"./dialog.js";import{g as X}from"./index.js";import{r as p,V as Y,w as Z,n as ee,aq as te,c as oe,o as m,U as t,a as ae,K as l,R as u,J as h,a2 as w,O as ie,G as le,u as s}from"./@vue.js";import"./dayjs.js";import"./ace-builds.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";import"./@fingerprintjs.js";import"./tslib.js";/* empty css     */const ne={class:"bg-fff radius-6 pd-20"},se={class:"mr-10 ml-10"},Ne={__name:"index",setup(re){const y=p([]),_=p(0),f=p(1),g=X("username"),o=Y({dialogVisible:!1,id:0,params:{},list:[]}),k=I();Z(()=>o.dialogVisible,e=>{e||c()});const c=async()=>{try{const e=await P();e.code===200&&(o.list=[...e.data.list],_.value=e.data.total)}catch(e){console.log(e)}},C=e=>{f.value=e,c()},x=e=>{y.value=e},V=e=>{o.id=e.id,o.dialogVisible=!0},E=()=>{o.id=0,o.dialogVisible=!0},B=e=>{let{type_code:a}=e;k.push({name:"config",params:{id:a}})},D=async e=>{H.confirm("将会删除当前类型下所有配置，确定要继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{T(e)}).catch(()=>{v({type:"info",message:"取消成功"})})},T=async e=>{try{const{id:a}=e;(await W({id:a})).code===200&&(v.success("删除成功 ^_^"),c())}catch(a){console.log(a)}};return ee(()=>{c()}),(e,a)=>{const r=$,M=q,n=A,N=z,S=j,R=F,U=G,d=te("permission-disabled");return m(),oe("div",ne,[t(M,{type:"flex",justify:"end"},{default:l(()=>[u((m(),h(r,{type:"primary",onClick:E,round:""},{default:l(()=>[...a[1]||(a[1]=[w("新增",-1)])]),_:1})),[[d,["editor","admin","super"]]])]),_:1}),ae("div",se,[t(R,{data:o.list,"tooltip-effect":"dark","row-key":"id",onSelectionChange:x},{default:l(()=>[t(n,{prop:"id",width:"100",label:"编号"}),t(n,{prop:"type_code",label:"标识"}),t(n,{prop:"type_name",label:"名称"}),t(n,{prop:"remark",label:"描述"}),t(n,{prop:"status",label:"是否启用"},{default:l(i=>[w(ie(i.row.status==1?"启用":"关闭"),1)]),_:1}),t(n,{fixed:"right",width:"200",label:"操作"},{default:l(i=>[t(r,{icon:s(J),circle:"",onClick:b=>B(i.row)},null,8,["icon","onClick"]),u(t(r,{icon:s(K),circle:"",onClick:b=>V(i.row)},null,8,["icon","onClick"]),[[d,["editor","admin","super"]]]),u(t(r,{icon:s(L),onClick:b=>D(i.row),disabled:s(g)===i.row.username,circle:""},null,8,["icon","onClick","disabled"]),[[d,["editor","admin","super"]]]),s(g)===i.row.username?(m(),h(S,{key:0,content:"当前登录用户不可删除",effect:"light",placement:"top-start"},{default:l(()=>[t(N,{class:"ml-10 t-4 pointer"},{default:l(()=>[t(s(O),{class:"c-165dff"})]),_:1})]),_:1})):le("",!0)]),_:1})]),_:1},8,["data"]),t(U,{background:"",layout:"prev, pager, next",total:_.value,"page-size":10,"model-value":f.value,"onUpdate:modelValue":C,"hide-on-single-page":""},null,8,["total","model-value"])]),t(Q,{visible:o.dialogVisible,"onUpdate:visible":a[0]||(a[0]=i=>o.dialogVisible=i),id:o.id},null,8,["visible","id"])])}}};export{Ne as default};
