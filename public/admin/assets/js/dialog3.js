import{q as K,r as Q,B as W,C as X,J as Y,s as Z,b as ee,g as oe,D as le,u as te,G as ae,a as C}from"./element-plus.js";import{b as se,r as w,V as re,w as ne,ai as de,c as I,o as n,U as t,K as a,J as i,G as f,a2 as m,a as _,M as x,L as D,H as A,aa as ue,O as me}from"./@vue.js";import{G as ie}from"./@element-plus.js";import{h as y,A as b,_ as pe,t as fe,a as ce}from"./index.js";let _e=(d={})=>y({url:"".concat(b.BASE_API,"/base/menu/list"),method:"get",params:d}),ye=(d={})=>y({url:"".concat(b.BASE_API,"/base/menu/create"),method:"post",data:d}),be=(d={})=>y({url:"".concat(b.BASE_API,"/base/menu/detail"),method:"get",params:d}),Ve=(d={})=>y({url:"".concat(b.BASE_API,"/base/menu/update"),method:"post",data:d}),Ae=(d={})=>y({url:"".concat(b.BASE_API,"/base/menu/delete"),method:"get",params:d});const ge={class:"icon-suffix-container"},ve={key:4},Ce={class:"dialog-footer"},ke={class:"icon-list"},we={class:"icon-wrapper"},Ie={class:"icon-name"},Ee={__name:"dialog",props:{visible:{type:Boolean,default:!1},id:{type:Number,default:0}},emits:["update:visible","success"],setup(d,{emit:P}){const k=d,E=P,B=se({get:()=>k.visible,set:s=>E("update:visible",s)}),V=w(null),o=re({menus:[],form:{id:0,pid:"",title:"",name:"",order_num:"0",path:"",component:"",is_frame:"2",type:"M",is_show:"1",is_cache:"2",perms:"",icon:""}});ne(()=>k.visible,async s=>{if(s){M();const e=Number(k.id)||0;o.form.id=e,L()}});const L=async()=>{try{let s=o.form.id,e=await be({id:s});e.code==200&&(o.form=e.data)}catch(s){console.error(s)}},F=s=>{s&&s.validate(e=>{if(e)o.form.id?h():$();else return console.log("error submit!!"),!1})},$=async()=>{try{let{id:s,...e}=o.form,r=e;s>0&&(r.id=s);const p=await ye(r);p.code===200?(C({message:"创建成功 ^_^",type:"success"}),g()):C({message:p.msg,type:"error"})}catch(s){console.log(s)}},h=async()=>{try{let s=o.form;const e=await Ve(s);e.code===200?(C({message:"更新成功 ^_^",type:"success"}),g()):C({message:e.msg,type:"error"})}catch(s){console.log(s)}},g=()=>{E("update:visible",!1),G()},G=()=>{o.form={id:0,pid:"",title:"",name:"",order_num:"0",path:"",component:"",is_frame:"2",type:"M",is_show:"1",is_cache:"2",perms:"",icon:""},o.menus=[]},M=async()=>{try{const s=await _e();if(s.code===200){const e={id:0,label:"主类目",children:[]},r=fe(s.data.list),p=ce(r,"title","id");e.children=p,o.menus=[e]}}catch(s){console.log(s)}};M();const v=w(!1),q=w(["DataLine","Monitor","Grid","MagicStick","Operation","Setting","User","House","Notification","MessageBox","DataBoard","Notebook","Collection","Postcard","SetUp","DataAnalysis","CreditCard","Cpu","Link","Connection","Position","Odometer","ChatLineRound","ChatSquare","ChatRound","ChatLineSquare","ChatDotSquare","Bell","PieChart","Compass","Filter","Message","MessageBox","Crop","SwitchButton","Operation","DataLine","Monitor","Location","Guide","Box","MagicStick","Goods","Coin"]),N=()=>{o.form.icon="",V.value&&V.value.validateField("icon")},O=s=>{o.form.icon=s,v.value=!1};return(s,e)=>{const r=X,p=W,u=Q,R=Y,c=Z,T=de("Close"),j=ee,H=K,S=oe,U=le,J=ae,z=te;return n(),I(A,null,[t(U,{modelValue:B.value,"onUpdate:modelValue":e[13]||(e[13]=l=>B.value=l),title:"编辑",onClose:g},{footer:a(()=>[_("span",Ce,[t(S,{onClick:x(g,["stop"])},{default:a(()=>[...e[23]||(e[23]=[m("取消",-1)])]),_:1}),t(S,{type:"primary",onClick:e[12]||(e[12]=l=>F(V.value))},{default:a(()=>[...e[24]||(e[24]=[m("确定",-1)])]),_:1})])]),default:a(()=>[t(H,{model:o.form,ref_key:"formRef",ref:V,"label-width":"84px"},{default:a(()=>[t(u,{label:"节点类型",prop:"type"},{default:a(()=>[t(p,{modelValue:o.form.type,"onUpdate:modelValue":e[0]||(e[0]=l=>o.form.type=l)},{default:a(()=>[t(r,{label:"目录",value:"M"},{default:a(()=>[...e[15]||(e[15]=[m("目录",-1)])]),_:1}),t(r,{label:"菜单",value:"C"},{default:a(()=>[...e[16]||(e[16]=[m("菜单",-1)])]),_:1}),t(r,{label:"按钮",value:"F"},{default:a(()=>[...e[17]||(e[17]=[m("按钮",-1)])]),_:1}),t(r,{label:"接口",value:"I"},{default:a(()=>[...e[18]||(e[18]=[m("其它接口",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(u,{label:"上级节点",prop:"pid"},{default:a(()=>[t(R,{modelValue:o.form.pid,"onUpdate:modelValue":e[1]||(e[1]=l=>o.form.pid=l),data:o.menus,"render-after-expand":!1,"check-strictly":"","show-count":!0,"node-key":"id",class:"w-full"},null,8,["modelValue","data"])]),_:1}),t(u,{label:"节点名称",prop:"title"},{default:a(()=>[t(c,{modelValue:o.form.title,"onUpdate:modelValue":e[2]||(e[2]=l=>o.form.title=l),placeholder:"请输入节点名称"},null,8,["modelValue"])]),_:1}),o.form.type!=="F"&&o.form.type!=="I"?(n(),i(u,{key:0,label:"节点图标"},{default:a(()=>[t(c,{modelValue:o.form.icon,"onUpdate:modelValue":e[3]||(e[3]=l=>o.form.icon=l),placeholder:"点击选择图标",readonly:"",onClick:e[4]||(e[4]=l=>v.value=!0)},{suffix:a(()=>[_("span",ge,[o.form.icon?(n(),i(j,{key:0,class:"clear-icon",onClick:x(N,["stop"])},{default:a(()=>[t(T)]),_:1})):f("",!0),o.form.icon?(n(),i(D(o.form.icon),{key:1,class:"selected-icon"})):f("",!0)])]),_:1},8,["modelValue"])]),_:1})):f("",!0),o.form.type!=="F"&&o.form.type!=="I"?(n(),i(u,{key:1,label:"显示排序",prop:"order_num"},{default:a(()=>[t(c,{modelValue:o.form.order_num,"onUpdate:modelValue":e[5]||(e[5]=l=>o.form.order_num=l),type:"number",placeholder:"请输入菜单排序"},null,8,["modelValue"])]),_:1})):f("",!0),o.form.type=="C"||o.form.type=="M"?(n(),i(u,{key:2,label:"路由名称",prop:"name"},{default:a(()=>[t(c,{modelValue:o.form.name,"onUpdate:modelValue":e[6]||(e[6]=l=>o.form.name=l),placeholder:"请输入菜单名称"},null,8,["modelValue"])]),_:1})):f("",!0),o.form.type=="C"||o.form.type=="M"?(n(),i(u,{key:3,label:"路由地址"},{default:a(()=>[t(c,{modelValue:o.form.path,"onUpdate:modelValue":e[7]||(e[7]=l=>o.form.path=l),placeholder:"请输入路由地址"},null,8,["modelValue"])]),_:1})):f("",!0),o.form.type=="C"?(n(),I("div",ve,[t(u,{label:"组件路径"},{default:a(()=>[t(c,{modelValue:o.form.component,"onUpdate:modelValue":e[8]||(e[8]=l=>o.form.component=l),placeholder:"请输入组件路径"},null,8,["modelValue"])]),_:1}),t(u,{label:"是否缓存"},{default:a(()=>[t(p,{modelValue:o.form.is_cache,"onUpdate:modelValue":e[9]||(e[9]=l=>o.form.is_cache=l)},{default:a(()=>[t(r,{label:"缓存",value:"1"},{default:a(()=>[...e[19]||(e[19]=[m("缓存",-1)])]),_:1}),t(r,{label:"不缓存",value:"2"},{default:a(()=>[...e[20]||(e[20]=[m("不缓存",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})])):f("",!0),o.form.type=="C"||o.form.type=="I"?(n(),i(u,{key:5,label:"显示状态"},{default:a(()=>[t(p,{modelValue:o.form.is_show,"onUpdate:modelValue":e[10]||(e[10]=l=>o.form.is_show=l)},{default:a(()=>[t(r,{label:"显示",value:"1"},{default:a(()=>[...e[21]||(e[21]=[m("显示",-1)])]),_:1}),t(r,{label:"隐藏",value:"2"},{default:a(()=>[...e[22]||(e[22]=[m("隐藏",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})):f("",!0),t(u,{label:"权限字符",rules:[{required:!0,message:"请输入权限字符",trigger:"blur"}]},{default:a(()=>[t(c,{modelValue:o.form.perms,"onUpdate:modelValue":e[11]||(e[11]=l=>o.form.perms=l),require:"",placeholder:"请输入权限标识"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),t(U,{modelValue:v.value,"onUpdate:modelValue":e[14]||(e[14]=l=>v.value=l),title:"选择图标",width:"60%","append-to-body":""},{default:a(()=>[_("div",ke,[t(z,{gutter:20},{default:a(()=>[(n(!0),I(A,null,ue(q.value,l=>(n(),i(J,{key:l,xs:8,sm:6,md:4,lg:3,xl:2,class:"icon-item",onClick:Me=>O(l)},{default:a(()=>[_("div",we,[(n(),i(D(ie[l]),{class:"icon"})),_("span",Ie,me(l),1)])]),_:2},1032,["onClick"]))),128))]),_:1})])]),_:1},8,["modelValue"])],64)}}},Be=pe(Ee,[["__scopeId","data-v-31129518"]]),Pe=Object.freeze(Object.defineProperty({__proto__:null,default:Be},Symbol.toStringTag,{value:"Module"}));export{Be as D,Pe as d,_e as l,Ae as r};
