import{g as S,u as V,v as j,T as M,U as P,x as $,y as q,a as p}from"./element-plus.js";import{u as z}from"./vue-router.js";import{H as F,F as G}from"./@element-plus.js";import{l as H,a as I}from"./slide.js";import{r as i,n as J,ai as K,aq as A,c as L,o as m,U as t,K as o,R as d,J as h,a2 as O,G as Q,u as y}from"./@vue.js";import"./dayjs.js";import"./ace-builds.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./index.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";import"./@fingerprintjs.js";import"./tslib.js";/* empty css     */const W={class:"pd-20 bg-fff radius-6"},be={__name:"index",setup(X){const b=z(),u=i([]),k=i([]),_=i(0),f=i(1),s=async()=>{try{const e=await H(f.value);e.code===200?(u.value=[...e.data.list],_.value=e.data.count):p({message:e.msg,type:"error"})}catch(e){console.log(e)}},w=e=>{f.value=e,s()},C=e=>{k.value=e},x=e=>{const l=e.id;b.push({name:"slide-edit",params:{id:l}})},E=async e=>{const l=e.id;try{const a=await I(l);a.code===200?(p({message:"删除成功 ^_^",type:"success"}),s()):p({message:a.msg,type:"error"})}catch(a){console.log(a)}},U=i(null);return J(()=>{s()}),(e,l)=>{const a=S,T=K("router-link"),g=V,r=j,v=P,D=M,B=$,N=q,c=A("permission-disabled");return m(),L("div",W,[t(g,{type:"flex",class:"mt-10 mb-10",justify:"end"},{default:o(()=>[d((m(),h(T,{to:"/slide/add"},{default:o(()=>[t(a,{type:"primary",round:""},{default:o(()=>[...l[0]||(l[0]=[O("新增",-1)])]),_:1})]),_:1})),[[c,["editor","admin","super"]]])]),_:1}),t(B,{ref_key:"multipleTable",ref:U,data:u.value,"tooltip-effect":"dark","row-key":"id",onSelectionChange:C},{default:o(()=>[t(r,{type:"selection"}),t(r,{prop:"id",label:"编号"}),t(r,{prop:"title",label:"标题"}),t(r,{prop:"imgUrl",label:"图片链接"},{default:o(n=>[n.row.imgUrl?(m(),h(D,{key:0,placement:"right",width:600,trigger:"hover"},{reference:o(()=>[t(v,{class:"avatar-uploader-icon pointer ml-10",src:n.row.imgUrl},null,8,["src"])]),default:o(()=>[t(v,{style:{width:"100%"},src:n.row.imgUrl},null,8,["src"])]),_:2},1024)):Q("",!0)]),_:1}),t(r,{prop:"linkUrl",label:"跳转链接"}),t(r,{fixed:"right",width:"100",label:"操作"},{default:o(n=>[d(t(a,{icon:y(F),circle:"",onClick:R=>x(n.row)},null,8,["icon","onClick"]),[[c,["editor","admin","super"]]]),d(t(a,{icon:y(G),circle:"",onClick:R=>E(n.row)},null,8,["icon","onClick"]),[[c,["editor","admin","super"]]])]),_:1})]),_:1},8,["data"]),t(g,{type:"flex",class:"mt-20 align-c",justify:"center"},{default:o(()=>[t(N,{background:"",layout:"prev, pager, next",onCurrentChange:w,"page-size":10,total:_.value,"hide-on-single-page":""},null,8,["total"])]),_:1})])}}};export{be as default};
