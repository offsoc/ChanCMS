System.register(["./element-plus-legacy.js","./vue-router-legacy.js","./@element-plus-legacy.js","./collect-legacy.js","./article-legacy.js","./index-legacy.js","./@vue-legacy.js","./dayjs-legacy.js","./ace-builds-legacy.js","./lodash-es-legacy.js","./@popperjs-legacy.js","./async-validator-legacy.js","./@ctrl-legacy.js","./memoize-one-legacy.js","./normalize-wheel-es-legacy.js","./pinia-legacy.js","./pinia-plugin-persist-legacy.js","./axios-legacy.js","./js-cookie-legacy.js","./nprogress-legacy.js","./@fingerprintjs-legacy.js","./tslib-legacy.js","./saduo-legacy.js"],function(e,t){"use strict";var a,l,s,c,n,o,i,r,u,d,g,p,y,f,j,m,h,v,w,_,b,k,C,x,T,S,A,D,z;return{setters:[e=>{a=e.g,l=e.u,s=e.v,c=e.x,n=e.y,o=e.a},e=>{i=e.u},e=>{r=e.H,u=e.F,d=e.J},e=>{g=e.l,p=e.b,y=e.a},e=>{f=e.c},e=>{j=e.f},e=>{m=e.r,h=e.V,v=e.n,w=e.ai,_=e.aq,b=e.c,k=e.o,C=e.U,x=e.K,T=e.R,S=e.J,A=e.a2,D=e.O,z=e.u},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const t={class:"bg-fff radius-6 pd-20"};e("default",{__name:"index",setup(e){const I=i(),U=m(null),F=m([]),J=m([]),P=m(0),$=m(1),q=m(0),B=h({cid:0,title:"",shortTitle:"",tagId:"",attr:[],source:"",author:"",description:"",img:"",createdAt:new Date,updatedAt:new Date,content:"欢迎使用ChanCMS系统",status:"0",pv:1,link:""}),G=async()=>{try{const e=await g($.value);200===e.code&&(F.value=[...e.data.list],P.value=e.data.count)}catch(e){console.log(e)}},H=e=>{$.value=e,g()},K=e=>{J.value=e},M=async e=>{try{const{pages:t,titleTag:a,articleTag:l,parseData:s,charset:c,cid:n,status:o}=e,i=t.split(","),r=await y({taskUrl:i[q.value],titleTag:a,articleTag:l,parseData:s,charset:c});if(200===r.code){const{title:e,article:t}=r.data;B.title=e,B.content=t,B.cid=n,B.status=1===o?1:0,N(B)}}catch(t){console.log(t)}},N=async e=>{try{const t={...B};t.attr=t.attr.toString(),t.tagId=t.tagId.toString(),!t.description&&t.content&&(t.description=j(t.content).substr(0,255));const a=await f({defaultParams:t,fieldParams:{}});200===a.code?(o({message:`第${q.value+1}条数据完成^_^`,type:"success"}),setTimeout(()=>{const{pages:t}=e,a=t.split(",");q.value<=a.length-1&&(M(e),q.value=q.value+1)},3e3)):o({message:a.msg||`第${q.value+1}条数据失败^_^`,type:"error"})}catch(t){console.log(t)}};return v(()=>{G()}),(e,i)=>{const g=a,y=w("router-link"),f=l,j=s,m=c,h=n,v=_("permission-disabled");return k(),b("div",t,[C(f,{type:"flex",justify:"end"},{default:x(()=>[T((k(),S(y,{to:"/collect/add"},{default:x(()=>[C(g,{type:"primary",round:""},{default:x(()=>[...i[0]||(i[0]=[A("新增",-1)])]),_:1})]),_:1})),[[v,["editor","admin","super"]]])]),_:1}),C(m,{ref_key:"multipleTable",ref:U,data:F.value,"tooltip-effect":"dark","row-key":"id",onSelectionChange:K},{default:x(()=>[C(j,{type:"selection"}),C(j,{prop:"id",width:"60",label:"编号"}),C(j,{prop:"taskName",label:"任务名称"}),C(j,{prop:"category",label:"所属栏目"}),C(j,{prop:"charset",label:"编码"},{default:x(e=>[A(D(1===e.row.charset?"UTF-8":"GB2312"),1)]),_:1}),C(j,{prop:"status",label:"状态"},{default:x(e=>[A(D(1===e.row.status?"草稿":"发布"),1)]),_:1}),C(j,{prop:"updatedAt",label:"发布时间"},{default:x(e=>[A(D(e.row.updatedAt),1)]),_:1}),C(j,{fixed:"right",width:"222",label:"操作"},{default:x(e=>[T(C(g,{icon:z(r),circle:"",onClick:t=>(e=>{const t=e.id;I.push({name:"collect-edit",params:{id:t}})})(e.row)},null,8,["icon","onClick"]),[[v,["editor","admin","super"]]]),T(C(g,{icon:z(u),circle:"",onClick:t=>(async e=>{const t=e.id;try{const e=await p(t);200===e.code?(o({message:"删除成功 ^_^",type:"success"}),G()):o({message:e.msg,type:"error"})}catch(a){console.log(a)}})(e.row)},null,8,["icon","onClick"]),[[v,["editor","admin","super"]]]),T((k(),S(g,{type:"primary",round:"",icon:z(d),onClick:t=>M(e.row)},{default:x(()=>[...i[1]||(i[1]=[A("执行",-1)])]),_:1},8,["icon","onClick"])),[[v,["editor","admin","super"]]])]),_:1})]),_:1},8,["data"]),C(f,{type:"flex",class:"mt-20 align-c",justify:"center"},{default:x(()=>[C(h,{background:"",layout:"prev, pager, next",onCurrentChange:H,"page-size":10,total:P.value,"hide-on-single-page":""},null,8,["total"])]),_:1})])}}})}}});
